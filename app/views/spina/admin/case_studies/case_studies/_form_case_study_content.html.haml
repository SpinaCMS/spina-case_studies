#case_study_content.tab-content.active.well
  .horizontal-form
    .horizontal-form-group
      .horizontal-form-label
        = Spina::CaseStudies::CaseStudy.human_attribute_name :title
      .horizontal-form-content
        = f.text_field :title, placeholder: Spina::CaseStudies::CaseStudy.human_attribute_name(:title_placeholder)

    .horizontal-form-group
      .horizontal-form-label
        = Spina::CaseStudies::CaseStudy.human_attribute_name :intro
      .horizontal-form-content
        = render 'spina/admin/shared/rich_text_field', f: f, field: :intro

    .horizontal-form-group
      .horizontal-form-label
        = Spina::CaseStudies::CaseStudy.human_attribute_name :spina_photo_id
      .horizontal-form-content
        = link_to spina.photo_select_admin_photos_path(f.object_name, selected_photo_id: f.object.try(:spina_photo_id), hidden_field_id: 'spina_photo_id'), remote: true, class: 'media_picker clearfix' do
          .placeholder
            %span.button.button-small.button-round
              %i.icon.icon-dots
              =t 'spina.pages.photo_picker'

          - if f.object.spina_photo && f.object.spina_photo.file.present?
            .image
              = image_tag f.object.spina_photo.file.thumb

          = f.hidden_field :spina_photo_id, data: { hidden_field_id: 'spina_photo_id'}

    .horizontal-form-content
      .structure-form
        .structure-form-menu
          %label= t('spina.case_studies.case_study_parts.title')

          %ul
            - unless f.object.case_study_parts.nil?
              - f.object.case_study_parts.sort_by(&:position).each_with_index do |part, index|
                %li{class: ('active' if index == 0), data: {case_study_part_id: part.object_id}}
                  = link_to "#structure_form_pane_#{part.object_id}" do
                    %i.icon.icon-bars.sortable-handle
                    = part.title

          = link_to_add_case_study_part_fields f, :case_study_parts do
            = icon('plus')

        .structure-form-content
          = f.fields_for :case_study_parts, f.object.case_study_parts.sort_by(&:position) do |ff|
            = render 'spina/admin/case_studies/case_study_parts/fields', f: ff
